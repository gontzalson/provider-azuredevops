// SPDX-FileCopyrightText: 2024 The Crossplane Authors <https://crossplane.io>
//
// SPDX-License-Identifier: Apache-2.0

// Code generated by upjet. DO NOT EDIT.

package v1alpha1

import (
	metav1 "k8s.io/apimachinery/pkg/apis/meta/v1"
	"k8s.io/apimachinery/pkg/runtime/schema"

	v1 "github.com/crossplane/crossplane-runtime/v2/apis/common/v1"
	v2 "github.com/crossplane/crossplane-runtime/v2/apis/common/v2"
)

type PolicyBuildValidationInitParameters struct {

	// A flag indicating if the policy should be blocking. Defaults to true.
	Blocking *bool `json:"blocking,omitempty" tf:"blocking,omitempty"`

	// A flag indicating if the policy should be enabled. Defaults to true.
	Enabled *bool `json:"enabled,omitempty" tf:"enabled,omitempty"`

	// The ID of the project in which the policy will be created.
	ProjectID *string `json:"projectId,omitempty" tf:"project_id,omitempty"`

	// Configuration for the policy. This block must be defined exactly once.
	Settings []PolicyBuildValidationSettingsInitParameters `json:"settings,omitempty" tf:"settings,omitempty"`
}

type PolicyBuildValidationObservation struct {

	// A flag indicating if the policy should be blocking. Defaults to true.
	Blocking *bool `json:"blocking,omitempty" tf:"blocking,omitempty"`

	// A flag indicating if the policy should be enabled. Defaults to true.
	Enabled *bool `json:"enabled,omitempty" tf:"enabled,omitempty"`

	// The ID of branch policy configuration.
	ID *string `json:"id,omitempty" tf:"id,omitempty"`

	// The ID of the project in which the policy will be created.
	ProjectID *string `json:"projectId,omitempty" tf:"project_id,omitempty"`

	// Configuration for the policy. This block must be defined exactly once.
	Settings []PolicyBuildValidationSettingsObservation `json:"settings,omitempty" tf:"settings,omitempty"`
}

type PolicyBuildValidationParameters struct {

	// A flag indicating if the policy should be blocking. Defaults to true.
	// +kubebuilder:validation:Optional
	Blocking *bool `json:"blocking,omitempty" tf:"blocking,omitempty"`

	// A flag indicating if the policy should be enabled. Defaults to true.
	// +kubebuilder:validation:Optional
	Enabled *bool `json:"enabled,omitempty" tf:"enabled,omitempty"`

	// The ID of the project in which the policy will be created.
	// +kubebuilder:validation:Optional
	ProjectID *string `json:"projectId,omitempty" tf:"project_id,omitempty"`

	// Configuration for the policy. This block must be defined exactly once.
	// +kubebuilder:validation:Optional
	Settings []PolicyBuildValidationSettingsParameters `json:"settings,omitempty" tf:"settings,omitempty"`
}

type PolicyBuildValidationSettingsInitParameters struct {

	// The ID of the build to monitor for the policy.
	BuildDefinitionID *float64 `json:"buildDefinitionId,omitempty" tf:"build_definition_id,omitempty"`

	// The display name for the policy.
	DisplayName *string `json:"displayName,omitempty" tf:"display_name,omitempty"`

	// If a path filter is set, the policy will only apply when files which match the filter are changes. Not setting this field means that the policy will always apply. You can specify absolute paths and wildcards. Example: ["/WebApp/Models/Data.cs", "/WebApp/*", "*.cs"]. Paths prefixed with "!" are excluded. Example: ["/WebApp/*", "!/WebApp/Tests/*"]. Order is significant.
	FilenamePatterns []*string `json:"filenamePatterns,omitempty" tf:"filename_patterns,omitempty"`

	// If set to true, the build will need to be manually queued. Defaults to false
	ManualQueueOnly *bool `json:"manualQueueOnly,omitempty" tf:"manual_queue_only,omitempty"`

	// True if the build should queue on source updates only. Defaults to true.
	QueueOnSourceUpdateOnly *bool `json:"queueOnSourceUpdateOnly,omitempty" tf:"queue_on_source_update_only,omitempty"`

	// Controls which repositories and branches the policy will be enabled for. This block must be defined at least once.
	Scope []SettingsScopeInitParameters `json:"scope,omitempty" tf:"scope,omitempty"`

	// The number of minutes for which the build is valid. If 0, the build will not expire. Defaults to 720 (12 hours).
	ValidDuration *float64 `json:"validDuration,omitempty" tf:"valid_duration,omitempty"`
}

type PolicyBuildValidationSettingsObservation struct {

	// The ID of the build to monitor for the policy.
	BuildDefinitionID *float64 `json:"buildDefinitionId,omitempty" tf:"build_definition_id,omitempty"`

	// The display name for the policy.
	DisplayName *string `json:"displayName,omitempty" tf:"display_name,omitempty"`

	// If a path filter is set, the policy will only apply when files which match the filter are changes. Not setting this field means that the policy will always apply. You can specify absolute paths and wildcards. Example: ["/WebApp/Models/Data.cs", "/WebApp/*", "*.cs"]. Paths prefixed with "!" are excluded. Example: ["/WebApp/*", "!/WebApp/Tests/*"]. Order is significant.
	FilenamePatterns []*string `json:"filenamePatterns,omitempty" tf:"filename_patterns,omitempty"`

	// If set to true, the build will need to be manually queued. Defaults to false
	ManualQueueOnly *bool `json:"manualQueueOnly,omitempty" tf:"manual_queue_only,omitempty"`

	// True if the build should queue on source updates only. Defaults to true.
	QueueOnSourceUpdateOnly *bool `json:"queueOnSourceUpdateOnly,omitempty" tf:"queue_on_source_update_only,omitempty"`

	// Controls which repositories and branches the policy will be enabled for. This block must be defined at least once.
	Scope []SettingsScopeObservation `json:"scope,omitempty" tf:"scope,omitempty"`

	// The number of minutes for which the build is valid. If 0, the build will not expire. Defaults to 720 (12 hours).
	ValidDuration *float64 `json:"validDuration,omitempty" tf:"valid_duration,omitempty"`
}

type PolicyBuildValidationSettingsParameters struct {

	// The ID of the build to monitor for the policy.
	// +kubebuilder:validation:Optional
	BuildDefinitionID *float64 `json:"buildDefinitionId" tf:"build_definition_id,omitempty"`

	// The display name for the policy.
	// +kubebuilder:validation:Optional
	DisplayName *string `json:"displayName" tf:"display_name,omitempty"`

	// If a path filter is set, the policy will only apply when files which match the filter are changes. Not setting this field means that the policy will always apply. You can specify absolute paths and wildcards. Example: ["/WebApp/Models/Data.cs", "/WebApp/*", "*.cs"]. Paths prefixed with "!" are excluded. Example: ["/WebApp/*", "!/WebApp/Tests/*"]. Order is significant.
	// +kubebuilder:validation:Optional
	FilenamePatterns []*string `json:"filenamePatterns,omitempty" tf:"filename_patterns,omitempty"`

	// If set to true, the build will need to be manually queued. Defaults to false
	// +kubebuilder:validation:Optional
	ManualQueueOnly *bool `json:"manualQueueOnly,omitempty" tf:"manual_queue_only,omitempty"`

	// True if the build should queue on source updates only. Defaults to true.
	// +kubebuilder:validation:Optional
	QueueOnSourceUpdateOnly *bool `json:"queueOnSourceUpdateOnly,omitempty" tf:"queue_on_source_update_only,omitempty"`

	// Controls which repositories and branches the policy will be enabled for. This block must be defined at least once.
	// +kubebuilder:validation:Optional
	Scope []SettingsScopeParameters `json:"scope" tf:"scope,omitempty"`

	// The number of minutes for which the build is valid. If 0, the build will not expire. Defaults to 720 (12 hours).
	// +kubebuilder:validation:Optional
	ValidDuration *float64 `json:"validDuration,omitempty" tf:"valid_duration,omitempty"`
}

type SettingsScopeInitParameters struct {

	// The match type to use when applying the policy. Supported values are Exact (default), Prefix or DefaultBranch.
	MatchType *string `json:"matchType,omitempty" tf:"match_type,omitempty"`

	// The repository ID. Needed only if the scope of the policy will be limited to a single repository. If match_type is DefaultBranch, this should not be defined.
	RepositoryID *string `json:"repositoryId,omitempty" tf:"repository_id,omitempty"`

	// The ref pattern to use for the match when match_type other than DefaultBranch. If match_type is Exact, this should be a qualified ref such as refs/heads/master. If match_type is Prefix, this should be a ref path such as refs/heads/releases.
	RepositoryRef *string `json:"repositoryRef,omitempty" tf:"repository_ref,omitempty"`
}

type SettingsScopeObservation struct {

	// The match type to use when applying the policy. Supported values are Exact (default), Prefix or DefaultBranch.
	MatchType *string `json:"matchType,omitempty" tf:"match_type,omitempty"`

	// The repository ID. Needed only if the scope of the policy will be limited to a single repository. If match_type is DefaultBranch, this should not be defined.
	RepositoryID *string `json:"repositoryId,omitempty" tf:"repository_id,omitempty"`

	// The ref pattern to use for the match when match_type other than DefaultBranch. If match_type is Exact, this should be a qualified ref such as refs/heads/master. If match_type is Prefix, this should be a ref path such as refs/heads/releases.
	RepositoryRef *string `json:"repositoryRef,omitempty" tf:"repository_ref,omitempty"`
}

type SettingsScopeParameters struct {

	// The match type to use when applying the policy. Supported values are Exact (default), Prefix or DefaultBranch.
	// +kubebuilder:validation:Optional
	MatchType *string `json:"matchType,omitempty" tf:"match_type,omitempty"`

	// The repository ID. Needed only if the scope of the policy will be limited to a single repository. If match_type is DefaultBranch, this should not be defined.
	// +kubebuilder:validation:Optional
	RepositoryID *string `json:"repositoryId,omitempty" tf:"repository_id,omitempty"`

	// The ref pattern to use for the match when match_type other than DefaultBranch. If match_type is Exact, this should be a qualified ref such as refs/heads/master. If match_type is Prefix, this should be a ref path such as refs/heads/releases.
	// +kubebuilder:validation:Optional
	RepositoryRef *string `json:"repositoryRef,omitempty" tf:"repository_ref,omitempty"`
}

// PolicyBuildValidationSpec defines the desired state of PolicyBuildValidation
type PolicyBuildValidationSpec struct {
	v2.ManagedResourceSpec `json:",inline"`
	ForProvider            PolicyBuildValidationParameters `json:"forProvider"`
	// THIS IS A BETA FIELD. It will be honored
	// unless the Management Policies feature flag is disabled.
	// InitProvider holds the same fields as ForProvider, with the exception
	// of Identifier and other resource reference fields. The fields that are
	// in InitProvider are merged into ForProvider when the resource is created.
	// The same fields are also added to the terraform ignore_changes hook, to
	// avoid updating them after creation. This is useful for fields that are
	// required on creation, but we do not desire to update them after creation,
	// for example because of an external controller is managing them, like an
	// autoscaler.
	InitProvider PolicyBuildValidationInitParameters `json:"initProvider,omitempty"`
}

// PolicyBuildValidationStatus defines the observed state of PolicyBuildValidation.
type PolicyBuildValidationStatus struct {
	v1.ResourceStatus `json:",inline"`
	AtProvider        PolicyBuildValidationObservation `json:"atProvider,omitempty"`
}

// +kubebuilder:object:root=true
// +kubebuilder:subresource:status
// +kubebuilder:storageversion

// PolicyBuildValidation is the Schema for the PolicyBuildValidations API. Manages a build validation branch policy within Azure DevOps project.
// +kubebuilder:printcolumn:name="SYNCED",type="string",JSONPath=".status.conditions[?(@.type=='Synced')].status"
// +kubebuilder:printcolumn:name="READY",type="string",JSONPath=".status.conditions[?(@.type=='Ready')].status"
// +kubebuilder:printcolumn:name="EXTERNAL-NAME",type="string",JSONPath=".metadata.annotations.crossplane\\.io/external-name"
// +kubebuilder:printcolumn:name="AGE",type="date",JSONPath=".metadata.creationTimestamp"
// +kubebuilder:resource:scope=Namespaced,categories={crossplane,managed,azuredevops}
type PolicyBuildValidation struct {
	metav1.TypeMeta   `json:",inline"`
	metav1.ObjectMeta `json:"metadata,omitempty"`
	// +kubebuilder:validation:XValidation:rule="!('*' in self.managementPolicies || 'Create' in self.managementPolicies || 'Update' in self.managementPolicies) || has(self.forProvider.projectId) || (has(self.initProvider) && has(self.initProvider.projectId))",message="spec.forProvider.projectId is a required parameter"
	// +kubebuilder:validation:XValidation:rule="!('*' in self.managementPolicies || 'Create' in self.managementPolicies || 'Update' in self.managementPolicies) || has(self.forProvider.settings) || (has(self.initProvider) && has(self.initProvider.settings))",message="spec.forProvider.settings is a required parameter"
	Spec   PolicyBuildValidationSpec   `json:"spec"`
	Status PolicyBuildValidationStatus `json:"status,omitempty"`
}

// +kubebuilder:object:root=true

// PolicyBuildValidationList contains a list of PolicyBuildValidations
type PolicyBuildValidationList struct {
	metav1.TypeMeta `json:",inline"`
	metav1.ListMeta `json:"metadata,omitempty"`
	Items           []PolicyBuildValidation `json:"items"`
}

// Repository type metadata.
var (
	PolicyBuildValidation_Kind             = "PolicyBuildValidation"
	PolicyBuildValidation_GroupKind        = schema.GroupKind{Group: CRDGroup, Kind: PolicyBuildValidation_Kind}.String()
	PolicyBuildValidation_KindAPIVersion   = PolicyBuildValidation_Kind + "." + CRDGroupVersion.String()
	PolicyBuildValidation_GroupVersionKind = CRDGroupVersion.WithKind(PolicyBuildValidation_Kind)
)

func init() {
	SchemeBuilder.Register(&PolicyBuildValidation{}, &PolicyBuildValidationList{})
}
